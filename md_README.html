<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Digi XBee(R) ANSI C Host Library: Digi XBee ANSI C Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Digi XBee(R) ANSI C Host Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Digi XBee ANSI C Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The project is a collection of portable ANSI C code for communicating with Digi International's <a href="http://www.digi.com/xbee/">XBee</a> wireless radio modules in API mode. You will typically compile/link the files directly into your application, instead of compiling them into a shared/dynamic-link library. Because of this design, most of the library configuration takes place at compile time.</p>
<p>This source has been contributed by <a href="http://www.digi.com/">Digi International</a> under the Mozilla Public License v2.0. It is a BETA quality software release, and has gone through a limited QA cycle.</p>
<p>It currently supports the following platforms:</p>
<ul>
<li>POSIX operating systems (Windows with <a href="http://www.cygwin.org/">Cygwin</a> or <a href="https://www.msys2.org/">MSYS2</a>, Mac OS X, Linux, BSD) with gcc</li>
<li>Windows with <a href="http://www.mingw.org/">MinGW</a> or <a href="http://mingw-w64.org/">Mingw-w64</a> and gcc</li>
<li>Digi International embedded hardware platforms that use <a href="https://github.com/digi-embedded/libdigiapix">libdigiapix</a> to control GPIO pins</li>
<li>DOS using the <a href="http://www.openwatcom.org/">OpenWatcom</a> compiler</li>
<li>Rabbit-brand microprocessors (using <a href="http://www.digi.com/support/productdetail?pid=4978">Dynamic C</a> 10.70 or later)</li>
<li>Freescale HCS08 with CodeWarrior 10.x (part of <a href="http://www.digi.com/programmablexbeekit">Programmable XBee Dev Kit</a>)</li>
<li>Freescale FRDM-KL25Z with <a href="http://mbed.org/">mbed.org</a> compiler (limited support at this time)</li>
<li><a href="http://www.silabs.com/">Silicon Labs</a> SLSTK3701A Starter Kit with Gecko SDK Suite v1.1.1 or later with optional Micrium OS support</li>
</ul>
<p>It provides an API for a host platform that communicates with an XBee radio serially. Some of the features include:</p>
<ul>
<li>Frame dispatcher that passes complete frames from the XBee radio out to multiple functions based on frame type.</li>
<li>Interface for sending API frames serially, with automatic header and checksum.</li>
<li>Message delivery that includes addressing information (short/long remote address, source/destination endpoint, cluster ID and profile ID).</li>
<li>Respond to messages using addressing information from the envelope of a received message.</li>
<li>Interface for sending "AT Command" frames.</li>
<li>Perform Node Discovery and manage a list of nodes.</li>
<li>Install firmware images (.EBL/.GBL or .OEM files) on the XBee radio.</li>
<li>Parse and display digital/analog I/O samples.</li>
<li>Interface with the General Purpose Memory (GPM) found on some XBee modules.</li>
</ul>
<p>Use <a href="https://github.com/digidotcom/xbee_ansic_library">GitHub</a> to report bugs, request features or contribute code to this project. Please read through this document before getting started with the code.</p>
<h2>Requirements </h2>
<p>Look at the <code>README.md</code> file in the appropriate <code>ports/</code> sub-directory for information on setting up the build environment.</p>
<h2>Documentation </h2>
<p>You can find <a href="http://digidotcom.github.io/xbee_ansic_library/">official documentation</a> on the GitHub page for the project. To generate local documentation to the <code>doc/html</code> directory, first download and install <a href="http://www.doxygen.nl/">Doxygen</a>.</p>
<p>Launch Doxywizard and open <code>Doxyfile</code> at the root directory of the driver. Go to the "Run" tab and click the "Run doxygen" button to build the HTML documentation files. The doxygen output will produce warnings for undocumented portions of the code &ndash; that's OK and expected.</p>
<p>To view the documentation, open <code>doc/html/index.html</code> in a web browser.</p>
<h2>XBee Firmware </h2>
<p>Configure your XBee radio with DigiMesh, ZigBee or Smart Energy firmware in "API" mode (with an API mode firmware or by setting ATAP=1). The samples use a default baud rate of 115200. The library is written to make use of flow control, so ATD6/ATD7 needs to be set to 1. Configure the radio with ATAO set to 1 to use extended transmit and receive frames.</p>
<h2>ZigBee Firmware </h2>
<p>When using ZigBee and Smart Energy firmware, keep the radio set to ATAO=1. In your application, you will need to set AO to 3 at startup in order to receive and process ZDO/ZDP requests used to discover your device's endpoints and clusters. On exit, set AO back to 1 so the radio will process those requests (and Smart Energy devices can complete Key Establishment to join a network). </p><pre class="fragment">xbee_cmd_simple(&amp;my_xbee, "AO", 3);
</pre><p>On ZigBee networks without Key Establishment, it should be safe to keep AO set to 3.</p>
<h2>File Descriptions </h2>
<p>Note that <code>frame_types.md</code> identifies headers and source files written to support each frame type.</p>
<p>Headers:</p>
<ul>
<li><code><a class="el" href="xbee_2platform_8h.html" title="Common header for Hardware Abstraction Layer. ">xbee/platform.h</a></code>: Function prototypes for hardware abstraction layer.</li>
<li><code>ports/&lt;target&gt;/platform_config.h</code>: Additional headers, automatically included by <code><a class="el" href="xbee_2platform_8h.html" title="Common header for Hardware Abstraction Layer. ">xbee/platform.h</a></code>, based on the target device.</li>
<li><code><a class="el" href="serial_8h.html" title="Platform-specific layer provieds a consistent serial API to upper layers of the driver. ">xbee/serial.h</a></code>: Platform-specific functions for managing the serial interface, reading and writing bytes, checking the XBee's CTS pin and setting the host's RTS pin.</li>
<li><code><a class="el" href="device_8h.html">xbee/device.h</a></code>: Read frames from XBee module and dispatch to frame handlers, send full frames to XBee module.</li>
<li><code><a class="el" href="atcmd_8h.html" title="Sending AT command requests and processing the responses. ">xbee/atcmd.h</a></code>: Working with local and remote "AT Command" frames for getting and setting XBee attributes and executing XBee commands.</li>
<li><code><a class="el" href="atmode_8h.html" title="Header for working with XBee modules in AT command mode instead of API mode. ">xbee/atmode.h</a></code>: Interfacing with XBee module in "AT mode", currently used for firmware updates on non-ZigBee modules.</li>
<li><code><a class="el" href="bl__gen3_8h.html" title="Code to interface with the &quot;Gen3&quot; XBee bootloader. ">xbee/bl_gen3.h</a></code>: Support for the "Gen3 Bootloader" used by S3B, S6, S6B, XLR, Cellular, SX, SX868, and S8 hardware.</li>
<li><code><a class="el" href="byteorder_8h.html">xbee/byteorder.h</a></code>: Byte-order-related functions used by multiple layers of the driver.</li>
<li><code><a class="el" href="cbuf_8h.html">xbee/cbuf.h</a></code>: Circular buffer used by the serial driver on some platforms, and the "transparent serial" cluster used in OTA updates. Available for general use to upper layers of the stack.</li>
<li><code><a class="el" href="commissioning_8h.html">xbee/commissioning.h</a></code>: Code for supporting the ZCL Commissioning Cluster on XBee ZB modules. See <code><a class="el" href="zcl__commissioning_8h.html" title="Header for ZCL Commissioning Cluster. ">zigbee/zcl_commissioning.h</a></code> for the required networking code.</li>
<li><code><a class="el" href="delivery__status_8h.html">xbee/delivery_status.h</a></code>: Status codes for 0x89 and 0x8B frames.</li>
<li><code><a class="el" href="discovery_8h.html" title="Note that Node Discovery isn&#39;t supported on XBee Smart Energy firmware. ">xbee/discovery.h</a></code>: Code related to Node Discovery (ATND).</li>
<li><code><a class="el" href="firmware_8h.html">xbee/firmware.h</a></code>: Code for updating radio firmware via .ebl, .gbl or .oem files.</li>
<li><code><a class="el" href="gpm_8h.html" title="General Purpose Memory interface, used on multiple module types (900HP, 868LP, Wi-Fi). ">xbee/gpm.h</a></code>: Code related to the General Purpose Memory (GPM) present on various XBee modules (e.g., S3B, S6B).</li>
<li><code><a class="el" href="io_8h.html">xbee/io.h</a></code>: Code for working with the analog and digital I/O pins on the XBee module.</li>
<li><code><a class="el" href="ipv4_8h.html">xbee/ipv4.h</a></code>: Support for IPv4 frames on XBee and XBee3 Cellular products.</li>
<li><code><a class="el" href="jslong_8h_source.html">xbee/jslong.h</a></code> and <code><a class="el" href="jslong__glue_8h_source.html">xbee/jslong_glue.h</a></code>: Code from mozilla.org used to manage 64-bit integers on platforms without direct support of them.</li>
<li><code><a class="el" href="pxbee__ota__client_8h.html">xbee/pxbee_ota_client.h</a></code>: Client code for sending OTA (over-the-air) firmware updates to Programmable XBee modules.</li>
<li><code><a class="el" href="pxbee__ota__server_8h.html" title="Code to add an OTA Server Cluster to a device. ">xbee/pxbee_ota_server.h</a></code>: Server code for advertising OTA capabilities on a device (typically a Programmable XBee module).</li>
<li><code><a class="el" href="scan_8h.html" title="Structures for the ATAS (Active Scan) API responses. ">xbee/scan.h</a></code>: Structures describing <code>ATAS</code> (Active Scan) responses.</li>
<li><code><a class="el" href="sms_8h.html">xbee/sms.h</a></code>: Support for SMS features of XBee and XBee3 Cellular products.</li>
<li><code><a class="el" href="socket_8h.html" title="Because this framework dispatches received frames to frame handlers, this API layer for sockets makes...">xbee/socket.h</a></code> and <code><a class="el" href="socket__frames_8h.html" title="Frame definitions and support functions for Extended Socket frames (0x40-0x4F and 0xC0-0xCF)...">xbee/socket_frames.h</a></code>: Support for Sockets API frames on XBee and XBee3 Cellular prodcuts.</li>
<li><code><a class="el" href="sxa_8h.html">xbee/sxa.h</a></code>: A "Simplified XBee API" with support for node table management, configurable I/O, point-to-point data streams and a connectionless datagram protocol. Used for XBee-only (not general ZigBee) networks. (Sample code limited to Rabbit platform.)</li>
<li><code><a class="el" href="time_8h.html">xbee/time.h</a></code>: Portable time functions for embedded platforms lacking full support of the Standard C Library <code><a class="el" href="time_8h.html">time.h</a></code>. Includes a version of <code>gmtime()</code> and <code>mktime()</code> using 1/1/2000 as the epoch.</li>
<li><code><a class="el" href="transparent__serial_8h.html" title="Support code for the &quot;Digi Transparent Serial&quot; cluster (cluster 0x0011 of endpoint 0xE8)...">xbee/transparent_serial.h</a></code>: Support code for the "Digi Transparent
  Serial" cluster (cluster 0x0011 of endpoint 0xE8), to communicate with "dumb" XBee modules running non-API mode firmware.</li>
<li><code><a class="el" href="user__data_8h.html">xbee/user_data.h</a></code>: Support for User Data Relay API frames used on XBee and XBee3 Cellular/802.15.4/Digimesh/Zigbee products.</li>
<li><code><a class="el" href="wifi_8h.html">xbee/wifi.h</a></code>: Code specific to the XBee S6B (Wi-Fi) module.</li>
<li><code><a class="el" href="wpan_8h.html">xbee/wpan.h</a></code>: Glue layer between XBee device driver and 802.15.4/ZigBee network.</li>
<li><code><a class="el" href="xmodem_8h.html" title="Makes use of xbee/serial.h API for sending and receiving serial data. ">xbee/xmodem.h</a></code>: XMODEM protocol layer, on top of xbee/serial layer, for sending firmware updates.</li>
<li><code><a class="el" href="xmodem__crc16_8h.html" title="Header for crc16_calc() function implemented in xmodem_crc16.c. ">xbee/xmodem_crc16.h</a></code>: Function to calculate 16-bit XMODEM CRC.</li>
<li><code><a class="el" href="types_8h.html" title="WPAN datatypes and support functions, valid for ZigBee and DigiMesh. ">wpan/types.h</a></code>: Types used by Wireless Personal Area Networks, not specific to the ZigBee protocol (e.g., 802.15.4 and DigiMesh).</li>
<li><code><a class="el" href="aps_8h.html" title="Cluster/Endpoint layer for WPAN networks (ZigBee and DigiMesh). ">wpan/aps.h</a></code>: APS-layer of WPAN networks (endpoints/clusters).</li>
<li><code><a class="el" href="zcl_8h.html" title="Header for implementation of ZigBee Cluster Library. ">zigbee/zcl.h</a></code>: ZigBee Cluster Library, including general commands.</li>
<li><code><a class="el" href="zcl__basic_8h.html" title="ZigBee Cluster Library; Basic Cluster (ZCL_CLUSTER_BASIC, 0x0000) ">zigbee/zcl_basic.h</a></code>: Basic Cluster for ZCL.</li>
<li><code><a class="el" href="zcl__basic__attributes_8h.html">zigbee/zcl_basic_attributes.h</a></code>: Used in main program to create a data structure and attribute for use in the device's endpoint table.</li>
<li><code><a class="el" href="zcl__client_8h.html" title="Code to support ZCL client clusters. ">zigbee/zcl_client.h</a></code>: Helper functions for creating ZCL client clusters.</li>
<li><code><a class="el" href="zcl__commissioning_8h.html" title="Header for ZCL Commissioning Cluster. ">zigbee/zcl_commissioning.h</a></code>: Non-certified implementation of Commissioning Cluster (server).</li>
<li><code><a class="el" href="zcl__identify_8h.html" title="Header for implementation of the ZigBee Identify Cluster (ZCL Spec section 3.5). ">zigbee/zcl_identify.h</a></code>: ZCL Identify Cluster (server).</li>
<li><code><a class="el" href="zcl__onoff_8h.html" title="On/Off Cluster: Attributes and commands for switching devices between &#39;On&#39; and &#39;Off&#39; states...">zigbee/zcl_onoff.h</a></code>: ZCL OnOff Cluster (incomplete).</li>
<li><code><a class="el" href="zcl__time_8h.html" title="Header for implementation of ZigBee Time Cluster (ZCL Spec section 3.12). ">zigbee/zcl_time.h</a></code>: ZCL Time Cluster (client and server).</li>
<li><code><a class="el" href="zcl__types_8h.html" title="Macros and structures related to the ZCL datatypes. ">zigbee/zcl_types.h</a></code>: ZCL datatypes</li>
<li><code><a class="el" href="zdo_8h.html" title="ZigBee Device Objects (ZDO) and ZigBee Device Profile (ZDP). ">zigbee/zdo.h</a></code>: ZigBee Device Objects/ZigBee Device Profile layer.</li>
</ul>
<p>Source (.c) directories:</p>
<ul>
<li><code>wpan</code>: source files for <code>include/wpan/*.h</code></li>
<li><code>xbee</code>: source files for <code>include/xbee/*.h</code></li>
<li><code>util</code>: Helper functions that may not be available on a given target. In some cases (like <code><a class="el" href="swapbytes_8c.html" title="For platforms without swap32() and swap16() functions for swapping byte order for 32 and 16-bit value...">swapbytes.c</a></code>), it can be used until an optimized, assembly-only version of the function can be written for the target.</li>
<li><code>zigbee</code>: source files for include/zigbee/*.h</li>
</ul>
<h2>Sample Programs </h2>
<p>See <code>samples/README.md</code> for descriptions.</p>
<h1>Adding to the Library </h1>
<p>We welcome your contributions to this library of code, but ask that you please follow these general guidelines.</p>
<h2>Coding Style </h2>
<ul>
<li>In general, code additions should match the style of existing code. Old files used 3-space tabs to match a legacy codebase, but current preference is to use four spaces for indentation instead of tabs.</li>
<li>When naming things in the global namespace (functions, macros, global variables) use a consistent prefix in the names.</li>
<li>Limit line length to 80 characters.</li>
<li>Use Doxygen-formatted comments for functions, types, globals and macros.</li>
<li>Always use curly braces ({ and }) after if and else statements. Follow style of existing files: <pre class="fragment">// Legacy style:
if (foo)
{
   do_bar();
}
else
{
   do_baz();
}

// Preferred style for new code:
if (foo) {
    do_bar();
} else {
    do_baz();
}
</pre></li>
<li>Declare pointers as <code>char *foo</code>, not <code>char* foo</code> or <code>char * foo</code>.</li>
</ul>
<h2>Portability </h2>
<p>This driver has been designed for portability to multiple platforms, from a resource-constrained 8-bit Freescale, up to a Windows PC. As such, it's important to keep the following in mind while working with the driver:</p>
<ul>
<li>Leave BeginHeader/EndHeader comments in place &ndash; they're used by the linker in Dynamic C on the Rabbit platform.</li>
<li><p class="startli">Use ANSI C (C89/C90 preferred, C99 features allowed if widely supported). To ease portability, code should not make use of GNU or other compiler extensions.</p>
<p class="startli">Exceptions: Some pointers in the driver are labelled <code>FAR</code> to allow for use of far memory on the Rabbit and HCS08 targets. Most target platforms define <code>FAR</code> as an empty macro.</p>
</li>
<li>Use types from <code>stdint.h</code> instead of <code>int</code>, <code>short</code> and <code>long</code>. Unless a variable is used within a function for a loop (where <code>int</code> is fine), or used in a platform-specific file (e.g., as part of the hardware abstraction layer), you should make use of the standard types from <code>stdint.h</code>: <code>int8_t</code>, <code>uint8_t</code>, <code>int16_t</code>, <code>uint16_t</code>, <code>int32_t</code>, <code>uint32_t</code>.</li>
<li><p class="startli">Variables and struct members that are stored in non-host-byte-order should have <code>_le</code> or <code>_be</code> appended to their names (for big endian and little endian). Use the functions from <code><a class="el" href="byteorder_8h.html">xbee/byteorder.h</a></code> (<code>htobe16</code>, <code>le32toh</code>, <code>memcpy_htobe</code>, <code>memcpy_betole</code>, etc.) to convert between host and big/little endian byte order. If you pretend that you don't know your host platform's endian-ness, you'll be forced to write portable code that never assumes a given byte order.</p>
<p class="startli"><em>DO NOT</em> use <code>hton</code>, <code>ntoh</code>, <code>htons</code>, <code>ntohs</code>, <code>intel</code> or <code>intel16</code>.</p>
<p class="startli">XBee frames store multi-byte values in big endian byte order. ZigBee frames store multi-byte values in little endian byte order. Target platforms can be big endian or little endian.</p>
<p class="startli">Use <code>#if BYTE_ORDER == LITTLE_ENDIAN</code> or <code>#if BYTE_ORDER == BIG_ENDIAN</code> when code requires different execution paths depending on the target's byte order.</p>
</li>
<li>When working with ZCL attributes, make use of the ZCL types for 40-bit <code><a class="el" href="unionzcl40__t.html" title="40-bit unsigned in host-byte-order ">zcl40_t</a></code>, 48-bit <code><a class="el" href="unionzcl48__t.html" title="48-bit unsigned in host-byte-order ">zcl48_t</a></code>, and 64-bit <code>zcl64_t</code> values. 24-bit attributes should use <code>uint32_t</code> or <code>int32_t</code> and 56-bit attributes should use <code>zcl64_t</code> (ZCL automatically sign extends into the high byte).</li>
<li>Place code at the correct layer of the driver. We're trying to keep the ZigBee layers (and above) separate from the XBee layers to allow for possible gateway applications (ZigBee to Ethernet, for example), and to limit the public release of ZigBee and Smart Energy code.</li>
</ul>
<h2>Other Options </h2>
<p>If you find that this library doesn't meet your needs, take a look at <a href="https://github.com/attie/libxbee3/">libxbee</a>, "a C/C++ library to aid the use of Digi XBee radios in API mode".</p>
<p>For a detailed list of libraries in many languages, visit Digi's <a href="http://examples.digi.com/quick-reference/">XBee Examples</a> site.</p>
<h2>License </h2>
<p>This software is open-source software. Copyright Digi International, 2013.</p>
<p>This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed with this file, You can obtain one at <a href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>.</p>
<p>This software includes MPL 1.1 licensed code from the Mozilla project. See <code>include/jslong.h</code> and <code><a class="el" href="jslong_8c.html">src/util/jslong.c</a></code> for details. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Nov 21 2020 22:08:40 for Digi XBee(R) ANSI C Host Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
